# Migration `20200531100701-revert-enums`

This migration has been generated by Yan Takushevich at 5/31/2020, 10:07:01 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "Complexity_new" AS ENUM ('ELEMENTARY', 'BASIC', 'ADVANCED', 'EXPERT');
ALTER TABLE "public"."Video" ALTER COLUMN "complexity" DROP DEFAULT,
                        ALTER COLUMN "complexity" TYPE "Complexity_new" USING ("complexity"::text::"Complexity_new"),
                        ALTER COLUMN "complexity" SET DEFAULT 'ELEMENTARY';
ALTER TYPE "Complexity" RENAME TO "Complexity_old";
ALTER TYPE "Complexity_new" RENAME TO "Complexity";
DROP TYPE "Complexity_old"

CREATE TYPE "VoteType_new" AS ENUM ('UP', 'DOWN');
ALTER TABLE "public"."Vote" ALTER COLUMN "type" DROP DEFAULT,
                        ALTER COLUMN "type" TYPE "VoteType_new" USING ("type"::text::"VoteType_new"),
                        ALTER COLUMN "type" SET DEFAULT 'UP';
ALTER TYPE "VoteType" RENAME TO "VoteType_old";
ALTER TYPE "VoteType_new" RENAME TO "VoteType";
DROP TYPE "VoteType_old"

ALTER TABLE "public"."Video" ALTER COLUMN "complexity" DROP DEFAULT;

ALTER TABLE "public"."Vote" ALTER COLUMN "type" DROP DEFAULT;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200530100158-title-case-unums..20200531100701-revert-enums
--- datamodel.dml
+++ datamodel.dml
@@ -4,9 +4,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model Video {
   ytId       String     @id
@@ -20,8 +20,10 @@
   uploader   User       @relation("UserVideos", fields: [uploaderId], references: [uid])
   uploaderId String
   language   Language   @relation(fields: [languageId], references: [id])
   languageId Int
+  User       User?      @relation(fields: [userUid], references: [uid])
+  userUid    String?
 }
 model User {
   uid       String  @id
@@ -39,10 +41,10 @@
   type    VoteType
 }
 enum VoteType {
-  Up
-  Down
+  UP
+  DOWN
 }
 model Topic {
   id     Int     @default(autoincrement()) @id
@@ -65,9 +67,9 @@
   videos Video[]
 }
 enum Complexity {
-  Elementary
-  Basic
-  Advanced
-  Expert
+  ELEMENTARY
+  BASIC
+  ADVANCED
+  EXPERT
 }
```


